# value_screener
## General
This project was created out of personal interest in a data oriented approach of the stock market. The goal was to create
    an investing recommendation tool designed for our personal needs.

## Overview
This module uses the SimFin Python API to retrieve firms' last annual financial
    statements (income statement, balance sheet and cash flow statement) and some basic data about the stock price. Using 
    this data, it allows the  calculation of financial metrics and relations, to help decide whether the firm's stock
    should be bought, sold, or held. To summarize the calculations, it allows generating a conclusive report. The metrics
    and relations in the report are all based on benchmarks that were defined by famous investors: Benjamin Graham,
    Warren Buffet, Peter Lynch and James P O'shaughnessy.
<br>**Important note #1** - the SimFin API's free version supplies financial reports with a delay of 1 year.
    Using this project with the free API version might return false or stale results.
<br>**Important note #2** - For now, this module only analyzes annual reports. In the future, we might add features to
    support analyzing the quarterly reports.

## Usage
The Firm class holds all the attributes and methods required for the analysis.
    An instance of this class represents a publicly traded firm. Once instantiated, the object reads the firm's last 
    annual financial statements (income statement, balance sheet and cash flow statement), and some basic data about the
    firm's stock value from Simfin's API.
<br>**To analyze a firm, we recommend using the generate_firm_report method of the Firm class**. All the rest of the methods in this
    class are being called under the hood to create the report. The generated report is a Python Pandas DataFrame object.
    Each row in the dataframe is a benchmark used by one of the famous investors to asses whether a stock is an
    attractive investment. The dataframe contains a written explanation on the benchmark, all the related values that
    were included in the calculation, and a bottom-line recommendation by the famous investor's theory.
<br>In case that you want to use some of the other methods separately, note the naming conventions:
<br>1. Methods that start with the word 'get' are used to calculate a ratio or a metric.
<br>2. Methods that end with the word 'test' are used to check if the stock is attractive according to a specific benchmark,
    and will return a boolean value.

## Usage example
    # Instantiate a class instance
    Apple = Firm(ticker='AAPL', market='us', write_data_dir='data')
    # Generate a detailed report
    Apple_report = Apple.generate_firm_report()

The generated report:

|    | investor               | test_name                             | description                                                                                                                                                                                    | test_passed   | related_values                                                                                                                                            |   investor_test_pass_rate | investor_recommendation   |
|---:|:-----------------------|:--------------------------------------|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:--------------|:----------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------:|:--------------------------|
|  0 | Benjamin Graham        | last revenue                          | Sales revenue > 350M                                                                                                                                                                           | True          | {'Last revenue': 260174000000.0}                                                                                                                          |                  0.166667 | sell                      |
|  1 | Benjamin Graham        | profits growth                        | 30% profits growth and not negative in the last 5 years                                                                                                                                        | False         | {'5 last profits': [55256000000, 59531000000, 48351000000, 45687000000, 53394000000], 'Profits growth last four years': 0.1553839937046726}               |                  0.166667 | sell                      |
|  2 | Benjamin Graham        | earnings_multiplier                   | Earnings multiplier lower than 15                                                                                                                                                              | False         | {'Earnings Multiplier': 44.93543898382076}                                                                                                                |                  0.166667 | sell                      |
|  3 | Benjamin Graham        | current_ratio                         | Current ratio higher than 2                                                                                                                                                                    | False         | {'Current ratio': 1.540125617208044}                                                                                                                      |                  0.166667 | sell                      |
|  4 | Benjamin Graham        | equity_earnings                       | Equity multiplier times earnings multiplier lower than 22                                                                                                                                      | False         | {'Equity multiplier': 3.7410043320661304, 'Earnings multiplier': 44.93543898382076}                                                                       |                  0.166667 | sell                      |
|  5 | Benjamin Graham        | working_capital_long_term_liabilities | Working capital higher than long term liabilities                                                                                                                                              | False         | {'Long term liabilities': 142310000000.0, 'Working capital': 57101000000.0}                                                                               |                  0.166667 | sell                      |
|  6 | Warren Buffet          | consistent_profits_growth             | EPS is constantly growing in the last 5 years, and is not negative                                                                                                                             | False         | {'Last 5 years common profit': [55256000000, 59531000000, 48351000000, 45687000000, 53394000000]}                                                         |                  0.666667 | hold                      |
|  7 | Warren Buffet          | net_income_long_liabilities           | Cumulative total net income of last 5 years higher than long term liabilities                                                                                                                  | True          | {'Cumulative net income of 5 years': 262219000000, 'Long term liabilities': 142310000000.0}                                                               |                  0.666667 | hold                      |
|  8 | Warren Buffet          | roa                                   | ROA higher than 12%                                                                                                                                                                            | True          | {'ROA': 0.16323009842961633}                                                                                                                              |                  0.666667 | hold                      |
|  9 | Warren Buffet          | roe_5_years                           | ROE of last 5 years higher than 15%                                                                                                                                                            | True          | {'Average ROE of last 5 years': 0.4661077517115312}                                                                                                       |                  0.666667 | hold                      |
| 10 | Warren Buffet          | positive_fcff                         | Free cash flow is positive                                                                                                                                                                     | True          | {'FCFF': 15972105131.052528}                                                                                                                              |                  0.666667 | hold                      |
| 11 | Warren Buffet          | profits_growth_to_surplus             | last year's profits growth over retained earnings                                                                                                                                              | False         | {"Last year's net income growth": -4275000000, 'Retained earnings': 45898000000.0}                                                                        |                  0.666667 | hold                      |
| 12 | Peter Lynch            | peg_ratio                             | PEG ratio lower than 1                                                                                                                                                                         | False         | {'PEG ratio': 2449.3902446787592}                                                                                                                         |                  0.5      | sell                      |
| 13 | Peter Lynch            | debt_equity_ratio                     | Debt to equity ratio lower than 0.8                                                                                                                                                            | True          | {'Debt to equity ratio': 0.08277340641853063, 'Shareholders equity': 90488000000, 'Net debt': 7490000000.0}                                               |                  0.5      | sell                      |
| 14 | Peter Lynch            | lynch_profits_growth                  | If both the average growth (5 years) and the last growth are over 0.2 - pass. If they're both over0.1, pass only if last year's growth is higher than the average growth. Else - fail.         | False         | {'Average profits growth rate of the last 5 years': 0.018345561341824523, "last year's profits growth rate": -0.0718113251919168}                         |                  0.5      | sell                      |
| 15 | Peter Lynch            | inventories_revenue_growth            | Growth of inventories to revenue ratio this year lower than 0.05                                                                                                                               | False         | {'Inventories to revenue ratios of last 2 years': [0.01578174606225065, 0.014894858713454697], 'Inventories to revenue ratio growth': 0.0595431864012792} |                  0.5      | sell                      |
| 16 | Peter Lynch            | positive_last_two_profits             | Positive profits for the last two years                                                                                                                                                        | True          | {"Last two years' profits": [55256000000, 59531000000]}                                                                                                   |                  0.5      | sell                      |
| 17 | Peter Lynch            | lynch_profit_revenue                  | If last 5 years' average profits growth rate over 0.2, pass if revenue is bigger than 1B.If last 5 years' average profits growth rate positive, pass if revenue is bigger than 1.9B.Else fail. | True          | {"Last 5 years' average profits growth rate": 0.018345561341824523, 'Last revenue': 260174000000.0}                                                       |                  0.5      | sell                      |
| 18 | James P. O'shaughnessy | market_cap                            | Market cap higher than 150M                                                                                                                                                                    | True          | {'Market cap': 2482952616490.0}                                                                                                                           |                  0.25     | sell                      |
| 19 | James P. O'shaughnessy | market_cap_revenue                    | Market cap over revenue lower than 1.5                                                                                                                                                         | False         | {'Market cap': 2482952616490.0, 'Revenue': 260174000000.0, 'Market cap to revenue ratio': 9.543430998062835}                                              |                  0.25     | sell                      |
| 20 | James P. O'shaughnessy | consistent_profits_growth             | EPS is constantly growing in the last 5 years, and is not negative                                                                                                                             | False         | {'Last 5 years common profit': [55256000000, 59531000000, 48351000000, 45687000000, 53394000000]}                                                         |                  0.25     | sell                      |
| 21 | James P. O'shaughnessy | market_cap_revenue_market_comparison  | Market cap to revenue lower than the market's market cap to revenue                                                                                                                            | False         | {'Market cap to revenue ratio': 9.543430998062835, 'Market cap to revenue entire market ratio': 2.28}                                                     |                  0.25     | sell                      |


Once instantiating the class, the whole financial reports dataset (includes all firms) is being read to your local disk.
    At the next time you call it, you can use the read_data_dir attribute to read the data from disk instead of the API:

    # Instantiate a class instance using locally stored data:
    Amazon = Firm(ticker='AMZN', market='us', read_data_dir='data')